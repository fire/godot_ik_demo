[gd_scene load_steps=17 format=2]

[ext_resource path="res://ik_demo/core/WallButton.gd" type="Script" id=1]
[ext_resource path="res://ik_demo/art/characters/xbot/ComplexSkeleton.tscn" type="PackedScene" id=2]
[ext_resource path="res://ik_demo/art/terget_texture.png" type="Texture" id=3]
[ext_resource path="res://ik_demo/core/TestPlayerIKScene.gd" type="Script" id=4]

[sub_resource type="GDScript" id=1]
script/source = "tool
extends Spatial

func _process(delta):
	
	look_at($Node/Pole.get_transform().origin, Vector3(0,1,0))"

[sub_resource type="SpatialMaterial" id=2]
flags_transparent = true
flags_unshaded = true
params_billboard_mode = 1
albedo_color = Color( 0.968627, 1, 0, 0.360784 )

[sub_resource type="ProceduralSky" id=3]

[sub_resource type="Environment" id=4]
background_mode = 2
background_sky = SubResource( 3 )
fog_height_min = 0.0
fog_height_max = 100.0
ssao_quality = 0

[sub_resource type="PhysicsMaterial" id=5]

[sub_resource type="BoxShape" id=6]
extents = Vector3( 10.2442, 0.223232, 15.4857 )

[sub_resource type="BoxShape" id=7]
extents = Vector3( 0.266421, 0.319029, 0.179196 )

[sub_resource type="CubeMesh" id=8]
size = Vector3( 0.05, 0.05, 0.05 )

[sub_resource type="SpatialMaterial" id=9]
albedo_color = Color( 1, 0, 0, 1 )
roughness = 0.0
emission_enabled = true
emission = Color( 1, 0, 0, 1 )
emission_energy = 1.0
emission_operator = 0
emission_on_uv2 = false

[sub_resource type="PhysicsMaterial" id=10]

[sub_resource type="BoxShape" id=11]
extents = Vector3( 6.02055, 4.29935, 0.001 )

[sub_resource type="PlaneMesh" id=12]
size = Vector2( 10, 10 )

[node name="Node" type="Node"]
script = ExtResource( 4 )

[node name="IK_Target" type="Spatial" parent="."]
transform = Transform( -0.044251, -0.0565217, 0.99742, 0, 0.998398, 0.0565771, -0.99902, 0.00250359, -0.0441801, -0.30404, 1.57792, 0.591041 )
script = SubResource( 1 )

[node name="Sprite3D" type="Sprite3D" parent="IK_Target"]
transform = Transform( 1, 0, 0, 0, 1, 2.8369e-08, 0, -1.44792e-09, 1, -1.78369, 0.00446999, -0.0788808 )
material_override = SubResource( 2 )
offset = Vector2( 0, 56.52 )
pixel_size = 0.002
double_sided = false
texture = ExtResource( 3 )

[node name="Node" type="Node" parent="IK_Target"]

[node name="Pole" type="Spatial" parent="IK_Target/Node"]
transform = Transform( 0.931716, 0.236678, -0.275479, -0.0193531, 0.78978, 0.613085, 0.362672, -0.56589, 0.740431, -0.902557, 1.54397, 0.617552 )

[node name="ComplexSkeleton" parent="." instance=ExtResource( 2 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.142211, 0, 2.34611 )

[node name="Skeleton3" parent="ComplexSkeleton" index="0"]
bones/36/rest = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -0.283, 0, 5.62519e-07 )

[node name="SkeletonIK" parent="ComplexSkeleton/Skeleton3" index="2"]
process_priority = 1
tip_bone = "mixamorig_RightHand"
target_node = NodePath("../../../IK_Target")

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource( 4 )

[node name="StaticBody" type="StaticBody" parent="."]
physics_material_override = SubResource( 5 )

[node name="CollisionShape" type="CollisionShape" parent="StaticBody"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.652561, 0 )
shape = SubResource( 6 )

[node name="WallButton" type="Area" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.147915, 1.3914, 2.81822 )
input_ray_pickable = false
angular_damp = 1.0
script = ExtResource( 1 )

[node name="CollisionShape" type="CollisionShape" parent="WallButton"]
shape = SubResource( 7 )

[node name="MeshInstance" type="MeshInstance" parent="WallButton"]
mesh = SubResource( 8 )
material/0 = SubResource( 9 )

[node name="StaticBody2" type="StaticBody" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.67918, 2.8875 )
physics_material_override = SubResource( 10 )

[node name="CollisionShape" type="CollisionShape" parent="StaticBody2"]
shape = SubResource( 11 )

[node name="MeshInstance" type="MeshInstance" parent="StaticBody2/CollisionShape"]
transform = Transform( 1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 0.00013566, 0, -0.00433731 )
mesh = SubResource( 12 )
material/0 = null
[connection signal="body_entered" from="WallButton" to="WallButton" method="_on_WallButton_body_entered"]
[connection signal="body_exited" from="WallButton" to="WallButton" method="_on_WallButton_body_exited"]

[editable path="ComplexSkeleton"]
